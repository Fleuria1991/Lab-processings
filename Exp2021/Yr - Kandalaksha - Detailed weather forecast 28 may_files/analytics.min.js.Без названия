/*!! Core Analytics v6.9.2 - Copyright (c) 2015-2021 NRK */
this.CA6=this.CA6||{},this.CA6["statistics/analytics"]=function(){"use strict";function e(e,t){for(var n=0,r=t.length,o=e.length;n<r;n++,o++)e[o]=t[n];return e}var t;function n(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];return t.filter((function(e){return e})).forEach((function(t){Object.keys(t).forEach((function(n){return e[n]=t[n]}))})),e}(function(e,t){var n;n=function(){function e(){for(var e=0,t={};e<arguments.length;e++){var n=arguments[e];for(var r in n)t[r]=n[r]}return t}function t(e){return e.replace(/(%[0-9A-Z]{2})+/g,decodeURIComponent)}return function n(r){function o(){}function a(t,n,a){if("undefined"!=typeof document){"number"==typeof(a=e({path:"/"},o.defaults,a)).expires&&(a.expires=new Date(1*new Date+864e5*a.expires)),a.expires=a.expires?a.expires.toUTCString():"";try{var i=JSON.stringify(n);/^[\{\[]/.test(i)&&(n=i)}catch(e){}n=r.write?r.write(n,t):encodeURIComponent(String(n)).replace(/%(23|24|26|2B|3A|3C|3E|3D|2F|3F|40|5B|5D|5E|60|7B|7D|7C)/g,decodeURIComponent),t=encodeURIComponent(String(t)).replace(/%(23|24|26|2B|5E|60|7C)/g,decodeURIComponent).replace(/[\(\)]/g,escape);var c="";for(var s in a)a[s]&&(c+="; "+s,!0!==a[s]&&(c+="="+a[s].split(";")[0]));return document.cookie=t+"="+n+c}}function i(e,n){if("undefined"!=typeof document){for(var o={},a=document.cookie?document.cookie.split("; "):[],i=0;i<a.length;i++){var c=a[i].split("="),s=c.slice(1).join("=");n||'"'!==s.charAt(0)||(s=s.slice(1,-1));try{var u=t(c[0]);if(s=(r.read||r)(s,u)||t(s),n)try{s=JSON.parse(s)}catch(e){}if(o[u]=s,e===u)break}catch(e){}}return e?o[e]:o}}return o.set=a,o.get=function(e){return i(e,!1)},o.getJSON=function(e){return i(e,!0)},o.remove=function(t,n){a(t,"",e(n,{expires:-1}))},o.defaults={},o.withConverter=n,o}((function(){}))},e.exports=n()})(t={exports:{}},t.exports);var r,o=function(){if("undefined"==typeof window)return function(){return null};var e=window.Element.prototype,t=e.matches||e.msMatchesSelector||e.webkitMatchesSelector;return function(n,r){if(e.closest)return n.closest(r);for(var o=n;o;o=o.parentElement)if(t.call(o,r))return o;return null}}();function a(e){return e.split("://").pop().replace(/^www\./,"")}!function(e){e.contentId="dimension1",e.title="dimension2",e.year="dimension3",e.month="dimension4",e.day="dimension5",e.parentId="dimension10"}(r||(r={}));var i="https://www.google-analytics.com/collect",c="https://nrk-recommendations.appspot.com/collectPersonalEvent";return function(t){function s(n){for(var r=[],o=1;o<arguments.length;o++)r[o-1]=arguments[o];try{window.ga.apply(window,e([t.uuid+"."+n],r))}catch(e){throw e}}function u(){var e=window.ga.getByName(t.uuid),n=e.get("sendHitTask");e.set("sendHitTask",(function(e){var r=Number(Boolean(t.get("userId"))),o=Number(r&&"1"===e.get("dimension9")),a=e.get("hitPayload").replace(/(^|&)cd[89]=[^&]*/g,"");if(e.set("dimension8",String(r),!0),e.set("dimension9",String(o),!0),e.set("hitPayload",a+"&cd8="+r+"&cd9="+o,!0),o){var i=t.get("userId"),s=new window.XMLHttpRequest,u=e.get("hitPayload")+"&nrkUserId="+encodeURIComponent(i);s.open("POST",c,!0),s.send(u),t.log('Sending personalization task with user "'+i+'" to '+c+":\n"+u)}n(e)}))}function d(e,t,r){var o=["eventCategory","eventAction","eventLabel","eventValue","nonInteraction"],a={dimension9:"event.personalization"===r?"1":"0"},i={};Array.isArray(e.ga)&&(e.ga=e.ga.reduce((function(e,t,r){return"object"==typeof t?n(e,t):e[o[r]]=t,e}),{})),Object.keys(e.ga).forEach((function(t){-1===o.indexOf(t)?i[t]=e.ga[t]:a[t]=e.ga[t]}));var c=parseInt(a.eventValue,10);a.eventCategory?a.eventAction?"eventValue"in a&&isNaN(c)?t("error",new Error("Please provide a value as a number: "+JSON.stringify(a.eventValue))):(g({ga:i}),s("send","event",a)):t("error",new Error("Please provide an action as a string")):t("error",new Error("Please provide a category as a string"))}function g(e){var o,i=e.ga||{},c=e.publishDate&&new Date(e.publishDate.toString());for(var u in c&&(isNaN(c.valueOf())?t("error",new Error("publishDate is an InvalidDate. Check formatting")):(i[r.year]=c.getFullYear(),i[r.month]=c.getMonth()+1,i[r.day]=c.getDate())),e.referrer&&(i.dimension6=a((o=e.referrer,n(document.createElement("a"),{href:o})).hostname),i.dimension7=a(e.referrer)),e){var d=r[u];d&&(i[d]=String(e[u]))}s("set",i)}document.querySelector('link[href="'+i+'"]')||document.head.appendChild(n(document.createElement("link"),{rel:"preconnect",href:i,crossOrigin:!0})),document.addEventListener("click",(function(e){var n;e.target&&e.target instanceof HTMLElement&&(n=t.contains(o(e.target,"[data-ga-category]"))||void 0);if(n){var r=n.hasAttribute("data-ga-value")&&parseInt(n.getAttribute("data-ga-value"),10),a={eventCategory:n.getAttribute("data-ga-category"),eventAction:n.getAttribute("data-ga-action"),eventLabel:n.getAttribute("data-ga-label")};r&&(a.eventValue=r),t("event",{ga:a})}})),t.set("gaEmit",s),t.on("initialize",(function(e){window.ga||(window.ga=function(){(window.ga.q=window.ga.q||[]).push(arguments)},window.ga.l=Math.round(window.performance.timeOrigin)||window.performance.timing.navigationStart);n={src:"https://www.google-analytics.com/analytics"+(t.debug?"_debug":"")+".js",crossorigin:!1},o=n.src,a=n.onload,i=void 0===a?Function.prototype:a,c=n.crossorigin,d=void 0===c||c,g=document.querySelector('script[src="'+o+'"]')||document.createElement("script"),l=g.queue=g.queue||[],l.length?l.push(i):g.parentNode?i(g):(l.push(i),g.async=!0,g.onload=function(){return l.splice(0).forEach((function(e){return e(g)}))},g.setAttribute("src",o),d&&-1===o.indexOf("//localhost")&&g.setAttribute("crossorigin","anonymous"),document.head.appendChild(g));var n,o,a,i,c,d,g,l;var p={name:t.uuid,trackingId:e.ga,cookieDomain:"auto"},f={anonymizeIp:!0,forceSSL:!0,transport:"beacon"};if(!p.trackingId)return void t("error",new Error("Please provide a Google Analytics trackingId"));e.parentId&&(f[r.parentId]=e.parentId);e.clientId&&(p.clientId=e.clientId);t.set("gaTrackingId",p.trackingId),window.ga("create",p),window.ga(u),s("set",f)})),t.on("context",g),t.on("pageview",(function(e){void 0===e&&(e={});e.ga||(e.ga={});e.contentId||t.log("You should provide a contentId when sending pageviews");if(e.page&&"/"!==e.page[0])return void t("error",new Error("The page parameter must be a string beginning with /"));e.ga.title=e.title||document.title,e.ga.page=e.page||document.location.pathname+document.location.search,e.ga.hostname=a(e.hostname||document.location.hostname),e.referrer=e.referrer||document.referrer,g(e),s("send","pageview",{dimension9:"1"})})),t.on("event",d),t.on("event.personalization",d)}}();
//# sourceMappingURL=analytics.min.js.map
