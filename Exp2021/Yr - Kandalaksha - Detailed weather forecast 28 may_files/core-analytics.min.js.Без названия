/*!! Core Analytics v6.9.2 - Copyright (c) 2015-2021 NRK */
this.CA6=this.CA6||{},this.CA6["core-analytics"]=function(){"use strict";var n,e="https://static.nrk.no/core-analytics/major/6";function t(n,e){for(var t=0,r=e.length,o=n.length;t<r;t++,o++)n[o]=e[t];return n}(function(n,e){var t;t=function(){function n(){for(var n=0,e={};n<arguments.length;n++){var t=arguments[n];for(var r in t)e[r]=t[r]}return e}function e(n){return n.replace(/(%[0-9A-Z]{2})+/g,decodeURIComponent)}return function t(r){function o(){}function i(e,t,i){if("undefined"!=typeof document){"number"==typeof(i=n({path:"/"},o.defaults,i)).expires&&(i.expires=new Date(1*new Date+864e5*i.expires)),i.expires=i.expires?i.expires.toUTCString():"";try{var c=JSON.stringify(t);/^[\{\[]/.test(c)&&(t=c)}catch(n){}t=r.write?r.write(t,e):encodeURIComponent(String(t)).replace(/%(23|24|26|2B|3A|3C|3E|3D|2F|3F|40|5B|5D|5E|60|7B|7D|7C)/g,decodeURIComponent),e=encodeURIComponent(String(e)).replace(/%(23|24|26|2B|5E|60|7C)/g,decodeURIComponent).replace(/[\(\)]/g,escape);var u="";for(var a in i)i[a]&&(u+="; "+a,!0!==i[a]&&(u+="="+i[a].split(";")[0]));return document.cookie=e+"="+t+u}}function c(n,t){if("undefined"!=typeof document){for(var o={},i=document.cookie?document.cookie.split("; "):[],c=0;c<i.length;c++){var u=i[c].split("="),a=u.slice(1).join("=");t||'"'!==a.charAt(0)||(a=a.slice(1,-1));try{var s=e(u[0]);if(a=(r.read||r)(a,s)||e(a),t)try{a=JSON.parse(a)}catch(n){}if(o[s]=a,n===s)break}catch(n){}}return n?o[n]:o}}return o.set=i,o.get=function(n){return c(n,!1)},o.getJSON=function(n){return c(n,!0)},o.remove=function(e,t){i(e,"",n(t,{expires:-1}))},o.defaults={},o.withConverter=t,o}((function(){}))},n.exports=t()})(n={exports:{}},n.exports);var r="data-core-analytics";return function n(){var o=[],i=[],c=Object.create(null),u=Object.create(null),a=Object.create(null),s=!1,f=function(n,e){if(function(n){var e;return void 0!==(null===(e=n)||void 0===e?void 0:e.q)}(n))n.q.forEach((function(n){return f.apply(void 0,n)}));else if(function(n){return"function"==typeof n}(n)){var t=o.index>1?1-o.index:o.length;o.splice(t,0,n),s&&setTimeout((function(){return o.index||f.next()}))}else if("string"==typeof n){var r=function(){var t=u[n]||[];t.length||f.log("Missing handler for action "+n),i.push({type:n,args:e}),t.forEach((function(t){return t(e,f,n)}))};if("initialize"===n){if(s)return f("error",new Error("Tracker is already initialized"));s=!0,o.unshift(r),setTimeout(f.next)}else f(r),f((function(){return i.pop()}))}return f};return f.version="6.9.2",f.create=n,f.debug=!1,f.set=function(n,e){"object"==typeof n?Object.keys(n).forEach((function(e){return f.set(e,n[e])})):c[n]=e},f.get=function(n){return n?c[n]:c},f.on=function(n,e){(u[n]=u[n]||[]).push(e),i.forEach((function(t){return t.type===n&&e(t.args,f,n)}))},f.off=function(n,e){u[n]=(u[n]||[]).filter((function(n){return e&&n!==e}))},f.log=function(){for(var n=[],e=0;e<arguments.length;e++)n[e]=arguments[e];f.debug&&console.log.apply(console,t(["%c"+f.uuid+":","font-weight:bold"],n))},f.load=function(n,e){a[e]||(a[e]=!0,f((function(){return function(n){var e=n.src,t=n.onload,r=void 0===t?Function.prototype:t,o=n.crossorigin,i=void 0===o||o,c=document.querySelector('script[src="'+e+'"]')||document.createElement("script"),u=c.queue=c.queue||[];u.length?u.push(r):c.parentNode?r(c):(u.push(r),c.async=!0,c.onload=function(){return u.splice(0).forEach((function(n){return n(c)}))},c.setAttribute("src",e),i&&-1===e.indexOf("//localhost")&&c.setAttribute("crossorigin","anonymous"),document.head.appendChild(c))}({src:n,onload:function(t){f.log("Loading "+n);var r=e.split("."),o=r[0],i=r[1],c=window[o]&&window[o][i];"function"==typeof c?c(f):f("error",new Error("Expected "+t.src+" to expose function at window."+e)),f.next()}}),!1})))},f.next=function(){var n=o.index=o.length,e=o.shift(),t=n&&e(f);"object"==typeof t&&null!==t&&"then"in t&&"function"==typeof t.then?t.then(f.next):n&&!1!==t&&f.next()},f.contains=function(n){for(var e=n;e;e=e.parentElement)if(e.hasAttribute(r))return e.hasAttribute(f.attr)&&n;return!1},f.uuid="",f.attr="",f.on("error",(function(n){return console.error("%c"+(f.uuid||"Core Analytics")+":","font-weight:bold",n.message)})),f.on("context",(function(n){return"userId"in n&&f.set("userId",n.userId)})),f.on("pageview",(function(n){void 0===n&&(n={}),n.tnsSection&&(f.load(e+"/statistics/unispring.min.js","CA6.statistics/unispring"),f.load(e+"/statistics/tns.min.js","CA6.statistics/tns"))})),f.on("recommendations",(function(){return f.load(e+"/recommendations/ecommerce.min.js","CA6.recommendations/ecommerce")})),f.on("optimize",(function(){return f.load(e+"/experiments/optimize.min.js","CA6.experiments/optimize")})),f.on("time-spent",(function(){return f.load(e+"/engagement/time-spent.min.js","CA6.engagement/time-spent")})),f.on("content-consumed",(function(){return f.load(e+"/engagement/content-consumed.min.js","CA6.engagement/content-consumed")})),f.on("initialize",(function(n){if(void 0===n&&(n={}),/\W/.test(n.trackerName||""))return f("error",new Error("trackerName can only contain alphanumeric characters"));var t=n.container||document.documentElement;f.uuid="ca_"+(n.trackerName||Math.round(Date.now()*Math.random()).toString(32)),f.attr=r+"-"+f.uuid.replace(/[\W_]+/g,"-"),t.setAttribute(r,""),t.setAttribute(f.attr,""),f.set({userId:n.userId,parentId:n.parentId,clientId:n.clientId}),n.debug&&f.log("Debug:",f.debug=Boolean(n.debug)),n.ga&&f.load(e+"/statistics/analytics.min.js","CA6.statistics/analytics")})),f}()}(),function(){var n=window.coreAnalytics||!1,e=window.CA6["core-analytics"];(!n.version||parseInt(n.version,10)<parseInt(e.version,10))&&(window.coreAnalytics=e(n))}();
//# sourceMappingURL=core-analytics.min.js.map
